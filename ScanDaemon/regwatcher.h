#pragma once

#include "watcher.h"
#include "fileutil.h"

namespace watcher
{
    using namespace fileutil;

    class RegWatcher : public Watcher
    {
    private: 
        RegRootKey rootRegKey_;
        tstring rootRegKeyName_;
        FileUtil fileUtil_;
        HKEY baseRegKey_;
        map<tstring, tstring> regValueMap_;

    private:
        void notifyNewVaue(void);
        void watchThreadFunc(void) override;

    public:
        RegWatcher() : baseRegKey_(NULL) {};
        ~RegWatcher() override;
        bool setBaseRegKey(const RegRootKey& rootKey, const tstring& rootKeyName, const tstring& baseSubKey);
    };
};
